---
up: "[[Clean Architecture 達人に学ぶソフトウェアの構造と設計]]"
related:
tags:
  - アーキテクチャ
  - コンポーネント
aliases:
  - コンポーネント
created: 2025-12-17
updated: 2025-12-17
---
### 概要

==「コンポーネントとは、デプロイの単位のことである」==

つまり、**「システムの一部として、独立してデプロイ（配置・リリース）できる最小の塊」** がコンポーネントです。

##### なぜ「デプロイの単位」と呼ぶのか？

アンクル・ボブがここで言いたいのは、「ファイル単体」や「クラス単体」で管理するのではなく、「一緒にリリースされるファイルたちは、ひとまとめにしておけ」ということです。

例えば、PHPで開発していて以下のような状況を想像してください。
1. **Aクラス**を変更した。
2. それにより、**Bクラス**も修正しないと動かなくなった。
3. さらに、**Cファイル**の設定も変える必要が出た。

この場合、A, B, C は「常に一緒に変更され、一緒にサーバーにアップロード（デプロイ）される運命」にあります。 だったら、これらは「同じコンポーネント」に入れるべきです。

逆に、「Dクラス」はAがどう変わろうと関係ないなら、Dは「別のコンポーネント」にしておくべきです。そうすれば、Aたちを修正して再デプロイする際、Dには触らなくて済みます。

##### 覚えておくべき3つの原則（コンポーネントの凝集度）

本の中では、「どのクラスを同じコンポーネントに入れるべきか？」を決めるための原則（REP, CCP, CRP）が紹介されていますが、一番わかりやすいのは CCP（閉鎖性共通の原則） です。

CCP：同じ理由、同じタイミングで変更されるクラスを、同じコンポーネントにまとめよ。
これはクラスレベルの「SRP（単一責任の原則）」を、コンポーネント（デプロイ単位）レベルに拡張したものです。

##### まとめ

- **コンポーネント ＝ デプロイの単位**（Jar, DLL, Package, Service）。
- **基準**：一緒に変更して、一緒にリリースするものは、同じコンポーネントに入れる。

「コンポーネント」という言葉は文脈によって「UIパーツ」などを指すこともありますが、クリーンアーキテクチャの文脈では「物理的にひとかたまりになってリリースされるモジュール」のことを指します。

### 詳細

#### コンポーネントの凝集性

##### ==REP：再利用・リリース等価の原則==
再利用の単位とリリースの単位は等価になる

- コンポーネントを大きくする働き
- 再利用性のためのグループ化

**デメリット**
他二つでもこの原則の弱点は補えない。
他二つはこの二つを否定的な意味で扱っている

##### ==CCP：閉鎖性共通の原則==
同じ理由、同じタイミングで変更されるクラスをコンポーネントにまとめること。変更の理由やタイミングが異なるクラスは、別のコンポーネントに分けること

- コンポーネントを大きくする働き
- 保守性のためのグループ化

**単一責任の原則との関係性**
コンポーネントに言い換えたもの
「コンポーネントを変更する理由が複数あるべできではない」

##### ==CRP：全再利用の原則==
コンポーネントのユーザーに対して、実際に使わないものへの依存を強要してはいけない。

- コンポーネントを小さくする働き
- 不要なリリース作業を減らすための分割

**インターフェイス分離の原則との関係性**
インターフェイス分離の原則を一般化したもの
使っていない関数を持つクラスに依存しないように伝えている。
CRPは使っていないクラスをコンポーネントに依存しないように伝えている


##### ==コンポーネントの凝集性のテンション図==
優れたアーキテクトはこの三角形の中で、開発チームの現在の懸念事項おに見合った落とし所を見つける。
時が経てば、チームの懸念事項が変わる
初期はREPよりCCPが重要である。再利用性よりも開発のしやすさの方が重要だからだ
初期は右側で、開発が進み別のプロジェクトから利用されるようになると左が重要になる

![[component.avif]]







#### コンポーネントの結合

##### ==ADP：非循環依存関係の原則==
コンポーネントの依存グラフに循環依存があってはいけない

- 循環すると相互依存してデプロイが遅くなる
- 循環依存していない場合は、デプロイを順番にできる
- 非循環にするには、依存関係逆転の原則

##### ==SDP：安定度依存の原則==
安定度の高い方向に依存すること

安定度とは、何かを変更する際に要する労力と関連している

- 多数のコンポーネントから依存させることで、安定を図る
	- これには、**「何が原因で変更されるのか（変更の理由）」**という視点が欠かせません。
	- 結論を一言で言うと、**「ビジネスロジックを、UIやDBといった『些細な変更』から守るため」**です。

##### ==安定度・抽象度等価の原則==
コンポーネントの抽象度は、その安定度と同程度でなければならない

- 安定依存の原則と安定度・抽象度等価の原則がコンポーネント版の依存関係逆転の原則に相当
- 抽象度が高い方に依存すべき